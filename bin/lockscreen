#!/bin/bash

SCREENSHOT_PATH="/tmp/hyprlock_screenshot.png"

active_window_json=$(hyprctl activewindow -j)
monitor_id=$(echo "$active_window_json" | jq -r '.monitor')

monitor_json=$(hyprctl monitors -j)
monitor_name=$(echo "$monitor_json" | jq -r --argjson id "$monitor_id" '.[] | select(.id == $id) | .name')

if [[ -z "$monitor_name" ]]; then
    # No monitor name found, take full screenshot
    grim "$SCREENSHOT_PATH"
else
    # Take screenshot of the specific monitor
    grim -o "$monitor_name" "$SCREENSHOT_PATH"
fi

hyprlock

